# Faust Libraries Update
This repository contains a fully rewritten version of the Faust libraries. The goals of this project are to:

* document the libraries using the `faust2md` system,
* standardize the libraries by factorizing their code, getting rid of duplicates, and establishing coding coventions,
* organize their different functions in a clear hierarchical manner,
* add missing standard functions,
* reorganize the `/examples` folder of the Faust repository.

## General Organization

This repository contains all the libraries (both the new libraries and the ones that were deprecated) that will need to be merged to the Faust repository. We tried to minimize the number of libraries to keep things easy for new users. Instead we created a wide range of sections in each of them. 

Only the libraries that are considered to be "standard" are documented:

* `analyzer.lib` 
* `basic.lib` 
* `delay.lib`
* `effect.lib`
* `envelope.lib`
* `filter.lib`
* `generator.lib`
* `hoa.lib`
* `math.lib`
* `pm.lib`
* `signal.lib`
* `spat.lib`
* `synth.lib`
* `demo.lib`
* `tonestack.lib` (not documented but example in `/examples/misc`)
* `tube.lib` (not documented but example in `/examples/misc`)

Other deprecated libraries such as `music.lib`, etc. are present but are not documented to not confuse new users. 

The markdown documentation of each library is located in `/doc` and can be automatically generated by running `generateDoc`.

The `/examples` directory contains all the examples from the `/examples` folder of the Faust distribution as well as new ones. Most of them were updated to reflect the coding conventions described in the next section. Examples are organized by types in different folders. The `/old` folder contains examples that are fully deprecated, probably because they were integrated to the libraries and fully rewritten (see `freeverb.dsp` for example). Examples using deprecated libraries were integrated to the general tree but a warning comment was added at their beginning to point readers to the right library and function. 

## Coding Conventions

In order to have a uniformized library system, we established the following conventions (that hopefully will be followed by others when making modifications to them :-) ).

### Documentation

* All the functions that we want to be "public" are documented.
* We used the `faust2md` "standards" for each library: `//###` for main title (library name - equivalent to `#` in markdown), `//===` for section declarations (equivalent to `##` in markdown) and `//---` for function declarations (equivalent to `####` in markdown - see `basic.lib` for an example).
* Sections in function documentation should be declared as `####` markdown title.
* Each function documentation provides a "Usage" section (see `basic.lib`). 

### Library Import

To prevent cross-references between libraries we generalized the use of the `library("")` system for function calls in all the libraries. This means that everytime a function declared in another library is called, the environment corresponding to this library needs to be called too. To make things easier, a `stdfaust.lib` library was created and is imported by all the libraries:

```
ma = library("math.lib");
ba = library("basic.lib");
de = library("delay.lib");
en = library("envelope.lib");
si = library("signal.lib");
an = library("analyzer.lib");
fi = library("filter.lib");
ge = library("generator.lib");
ho = library("hoa.lib");
sp = library("spat.lib");
sy = library("synth.lib");
ef = library("effect.lib");
```

For example, if we wanted to use the `smooth` function which is now declared in `signal.lib`, we would do the following:

```
import("stdfaust.lib");

process = si.smooth(0.999);
```

This standard is only used within the libraries: nothing prevents coders to still import `signal.lib` directly and call `smooth` without `si.`, etc.

### "Demo" Functions

All the functions that were present in the libraries and that contained any kind of UI elements declaration (mostly JOS "`demo`" functions) were turned into independant `.dsp` files that were placed in the `/examples` folder. Thus, Faust libraries now only contain "pure" function declarations which should make them more legible. Also, "`demo`" functions make great examples... 

For practicality, the "`demo`" functions are still declared and are available in `demo.lib` as "components" pointing at the `/examples` folder (which is why that folder will have to be installed on the system during the installation process of the Faust distribution).

## The question of licensing/authoring/copyrigth

Now that Faust libraries are not author specific, each function will be able to have its own licence/author declaration. This means that some libraries wont have a global licence/author/copyright declaration like it used to be the case.